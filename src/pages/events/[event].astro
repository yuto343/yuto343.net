---
import { CollectionEntry, getCollection } from "astro:content";
import { formatDate } from "../../libs/date";
import Header from "../../components/shared/header.astro";
import Layout from "../../layouts/layout.astro";

export async function getStaticPaths() {
  const events = await getCollection("events");
  return events.map((event) => ({
    params: { event: event.slug },
    props: { event },
  }));
}
interface Props {
  event: CollectionEntry<"events">;
}

const { event } = Astro.props;
const { Content } = await event.render();
---

<Layout>
  <Header />
  <div>
    <h1>{event.data.title}</h1>
    <time>{formatDate(event.data.date)}</time>
    {event.data.at && <p>{event.data.at}</p>}
  </div>
  <Content />
</Layout>
